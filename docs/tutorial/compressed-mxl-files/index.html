
<!DOCTYPE html>
<html lang="en">
<head>
<title>Compressed .MXL Files | MusicXML 4.0</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="../../static/styles.css">

</head>

<body class="has-sidenav">
<div class="topnav">
    <button id="toggle" class="toggle">
        <svg viewBox="0 0 100 80" width="16" height="16" fill="currentColor">
          <rect width="100" height="20" rx="8"></rect>
          <rect y="30" width="100" height="20" rx="8"></rect>
          <rect y="60" width="100" height="20" rx="8"></rect>
        </svg>
    </button>
    <a class="logo" href="../../">
        <span class="logo-text">MusicXML 4.0</span>
    </a>
</div>


<div class="content">
    <nav class="sidenav">
        <img src="../../static/images/back-cg-final.png"/>
<ul>
    <li><b><a href="../../"/>Introduction</a></b></li>
    <li><b><a href="../introduction/">Tutorial</a></b></li>
    <ul>
        <li><a href="../hello-world/">"Hello World"</a></li>
        <li><a href="../structure-of-musicxml-files/">File Structure</a></li>
        <li><a href="../midi-compatible-part/">MIDI-Compatible Part</a></li>
        <li><a href="../notation-basics/">Notation Basics</a></li>
        <li><a href="../chord-symbols-and-diagrams/">Chord Symbols</a></li>
        <li><a href="../tablature/">Tablature</a></li>
        <li><a href="../percussion/">Percussion</a></li>
        <li><a href="./">Compressed .MXL Files</a></li>
        <li><a href="../code-generation/">Code Generation</a></li>
    </ul>
    <li><b><a href="../../musicxml-reference/">MusicXML Reference</a></b></li>
    <ul>
        <li><a href="../../musicxml-reference/elements/">Elements</a></li>
        <li><a href="../../musicxml-reference/data-types/">Data Types</a></li>
        <li><a href="../../musicxml-reference/examples/">Examples</a></li>
    </ul>
    <li><b><a href="../../container-reference/">Container Reference</a></b></li>
    <ul>
        <li><a href="../../container-reference/elements/">Elements</a></li>
        <li><a href="../../container-reference/examples/">Examples</a></li>
    </ul>
    <li><b><a href="../../opus-reference/">Opus Reference</a></b></li>
    <ul>
        <li><a href="../../opus-reference/elements/">Elements</a></li>
        <li><a href="../../opus-reference/data-types/">Data Types</a></li>
        <li><a href="../../opus-reference/examples/">Examples</a></li>
    </ul>
    <li><b><a href="../../sounds-reference/">Sounds Reference</a></b></li>
    <ul>
        <li><a href="../../sounds-reference/elements/">Elements</a></li>
        <li><a href="../../sounds-reference/data-types/">Data Types</a></li>
        <li><a href="../../sounds-reference/examples/">Examples</a></li>
    </ul>
    <li><b><a href="../../listings/overview/">File Listings</a></b></li>
    <ul>
        <li><a href="../../listings/musicxml.xsd/">musicxml.xsd</a></li>
        <li><a href="../../listings/xlink.xsd/">xlink.xsd</a></li>
        <li><a href="../../listings/xml.xsd/">xml.xsd</a></li>
        <li><a href="../../listings/container.xsd/">container.xsd</a></li>
        <li><a href="../../listings/opus.xsd/">opus.xsd</a></li>
        <li><a href="../../listings/sounds.xsd/">sounds.xsd</a></li>
        <li><a href="../../listings/sounds.xml/">sounds.xml</a></li>
        <li><a href="../../listings/catalog.xml/">catalog.xml</a></li>
        <li><a href="../../listings/to31.xsl/">to31.xsl</a></li>
        <li><a href="../../listings/to30.xsl/">to30.xsl</a></li>
        <li><a href="../../listings/to20.xsl/">to20.xsl</a></li>
        <li><a href="../../listings/to11.xsl/">to11.xsl</a></li>
        <li><a href="../../listings/to10.xsl/">to10.xsl</a></li>
        <li><a href="../../listings/parttime.xsl/">parttime.xsl</a></li>
        <li><a href="../../listings/timepart.xsl/">timepart.xsl</a></li>
    </ul>
    <li><b><a href="../../version-history/">Version History</a></b></li>
    <ul>
        <li><a href="../../version-history/40/">Version 4.0</a></li>
        <li><a href="../../version-history/31/">Version 3.1</a></li>
        <li><a href="../../version-history/30/">Version 3.0</a></li>
        <li><a href="../../version-history/20/">Version 2.0</a></li>
        <li><a href="../../version-history/11/">Version 1.1</a></li>
        <li><a href="../../version-history/10/">Version 1.0</a></li>
    </ul>
</ul>
    </nav>
    <main>
    
<p class="breadcrumb">
    <a href="../../">MusicXML 4.0</a> &gt;
    <a href="../">Tutorial</a> &gt;
    Compressed .MXL Files
</p>

<h1>Compressed .MXL Files</h1>

<p>Regular, plain text MusicXML files can be very large - much larger than the original music notation application files, or corresponding MIDI files. This was not a big problem for using MusicXML as an interchange format, but it inhibited MusicXMLâ€™s use as a sheet music distribution format.</p>
        <p>MusicXML 2.0 introduced a new compressed format which reduces MusicXML file sizes to roughly the same size as the corresponding MIDI files. The format uses zip compression and a special .mxl file suffix and Internet media type to identify files as MusicXML files vs. generic XML files. This section describes how the compressed format works.</p>
        <h2 id="compressed-file-format">Compressed File Format</h2>
        <p>MusicXML uses a zip-based XML format similar to that used by Open Office and many other XML formats. The MusicXML 4.0 zip file format is compatible with the zip format used by the java.util.zip package and Java JAR files. It is based on the Info-ZIP format described at:</p>
        <p><a href="http://www.info-zip.org/doc/appnote-19970311-iz.zip" target="_blank">http://www.info-zip.org/doc/appnote-19970311-iz.zip</a>
        </p>
        <p>The JAR file format is specified at:</p>
        <p><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html">https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html</a>
        </p>
        <p>Note that, compatible with JAR files, file names should be encoded in UTF-8 format.</p>
        <p>Files with the zip container are compressed the DEFLATE algorithm. The DEFLATE Compressed Data Format (RFC 1951) is specified at:</p>
        <p><a href="https://www.ietf.org/rfc/rfc1951.txt">https://www.ietf.org/rfc/rfc1951.txt</a>
        </p>
        <p>By making these choices, software can usually use the zip libraries available for Java and most other programming languages to create the compressed zip files.</p>
        <h2 id="file-suffixes-and-media-types">File Suffixes and Media Types</h2>
        <p>The recommended file suffixes for MusicXML files are .mxl for compressed files and .musicxml for uncompressed files.  Using unique file suffixes lets programs distinguish MusicXML files from generic XML files in a way that using the .xml suffix for uncompressed files does not.</p>
        <p>Many XML editing tools such as XMLSpy and Oxygen now support the editing of zip-compressed XML files. All that is necessary is to let the editor application know that .mxl files are a zip-based format. The editor will then let you edit both the structure of the .mxl file as well as the .musicxml files that are contained within the zip archive.</p>
        <p>MusicXML has registered media types available for both compressed .mxl and uncompressed .musicxml files. The recommended media type for a compressed MusicXML file is:</p>
        <p><pre>application/vnd.recordare.musicxml</pre></p>
        <p>The recommended media type for an uncompressed MusicXML file is:</p>
        <p><pre>application/vnd.recordare.musicxml+xml</pre></p>
        <h2 id="zip-archive-structure">Zip Archive Structure</h2>
        <p>Following the example of many zip-based XML formats, MusicXML has a strictly defined way to determine where the root MusicXML file is within an archive. Each MusicXML zip archive has a file located at META-INF/container.xml. This container describes the starting point for the MusicXML version of the file, as well as alternate renditions such as PDF and audio versions of the musical score.</p>
        <p>The container.xml file is defined by the container.dtd file. Given the simplicity of the format, there is no corresponding .xsd file at this time.</p>
        <p>As an example, let us look at the Dichterliebe01.mxl file available on the MakeMusic web site. Here is its META-INF/container.xml file:</p>
        <p><pre xml:space="preserve">&lt;?xml version="1.0" encoding="UTF-8"&gt;
&lt;container&gt;
  &lt;rootfiles&gt;
    &lt;rootfile full-path="Dichterliebe01.musicxml"
              media-type="application/vnd.recordare.musicxml+xml"/&gt;
  &lt;/rootfiles&gt;
&lt;/container&gt;</pre></p>
        <p>The <a href="../../container-reference/elements/container/">&lt;container&gt;</a> element is the document element for this file. It contains a single <a href="../../container-reference/elements/rootfiles/">&lt;rootfiles&gt;</a> element. The &lt;rootfiles&gt; element in turn contains one or more <a href="../../container-reference/elements/rootfile/">&lt;rootfile&gt;</a> elements. The MusicXML root must be described in the first &lt;rootfile&gt; element. The full-path attribute provides the path relative to the root folder of the zip file. A MusicXML file used as a &lt;rootfile&gt; may have <a href="../../musicxml-reference/elements/score-partwise/">&lt;score-partwise&gt;</a>, <a href="../../musicxml-reference/elements/score-timewise/">&lt;score-timewise&gt;</a>, or <a href="../../opus-reference/elements/opus/">&lt;opus&gt;</a> as its document element.</p>
        <p>Additional &lt;rootfile&gt; elements can describe alternate versions such as PDF and audio files. Multiple &lt;rootfile&gt; elements can be distinguished by each one having a different media-type attribute value. For instance, if the Dichterliebe01.mxl file contained a PDF rendition as well as the MusicXML file, the container.xml file would look like this:</p>
        <p><pre xml:space="preserve">&lt;?xml version="1.0" encoding="UTF-8"&gt;
&lt;container&gt;
  &lt;rootfiles&gt;
    &lt;rootfile full-path="Dichterliebe01.musicxml"
              media-type="application/vnd.recordare.musicxml+xml"/&gt;
    &lt;rootfile full-path="Dichterliebe01.pdf"
              media-type="application/pdf"/&gt;
  &lt;/rootfiles&gt;
&lt;/container&gt;</pre></p>
        <p>If no media-type value is present, a MusicXML file is assumed. However, if multiple rootfiles are present, it will probably make things more clear to include the media-type attribute for all &lt;rootfile&gt; elements.</p>
        <p>The zip archive can also include images that are referenced with the MusicXML <a href="../../musicxml-reference/elements/image/">&lt;image&gt;</a> and <a href="../../musicxml-reference/elements/credit-image/">&lt;credit-image&gt;</a> elements, parts that are referenced with the MusicXML <a href="../../musicxml-reference/elements/part-link/">&lt;part-link&gt;</a> element, or other media that are referenced using the MusicXML link element. MusicXML 4.0 does not specify where these files need to be located in the zip file, but it is probably least confusing if images or other files of a similar type are grouped together in a subfolder within the zip archive.</p>
<p>The first file in the zip container should be a file named mimetype. The contents of this file should be the MIME media type string</p>
<p><pre>application/vnd.recordare.musicxml</pre></p>
<p>The mimetype file should be encoded in US-ASCII and must not be compressed or encrypted, and there must not be an extra field in its zip header. The contents of the mimetype file must not contain any leading padding or white space, and must not begin with a byte order mark.</p>
<p>The mimetype file helps applications identify a compressed MusicXML file by reading the first few bytes of the file. EPUB and other zip-based formats also use a mimetype file for the same reason. Older versions of MusicXML before version 3.1 did not specify this mimetype file, so applications may still see containers without it.</p>

<p>Next: <a href="../code-generation/">Code Generation</a>

    </main>
</div>


<script type="text/javascript" src="../../static/global.js"></script>

</body>
</html>
